%
% Fonts.
%

% Identification
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{font}[2019/08/08 Custom font configuration]

% The default font is Latin Modern
\def\@font{latinmodern}

% Save the option in \@font
\DeclareOption*{
    \let\@font\CurrentOption
}

\ProcessOptions*

% For string comparison
\RequirePackage{xstring}

% Driver specific code
\RequirePackage{iftex}

% If compiled with LuaTeX, use the fontspec package and Fira Code as typewriter. Otherwise use T1
% font encoding.
\ifLuaTeX
    \RequirePackage{fontspec}
    \setmonofont{Fira Code}

\else
    \RequirePackage[T1]{fontenc}
\fi

% Micro-typographic extensions
\RequirePackage{microtype}

% Match against the \@font variable
\IfStrEqCase{\@font}{
    {latinmodern}{
        % Latin Modern.
        %
        % An advance of Computer Modern.
        \RequirePackage{lmodern}
    }
}[
    \RequirePackage{\@font}
]
