%
% Integration of source code with the listings package.
%

% Basic packages
\RequirePackage{listings}

% Default settings
\lstset{
    columns=fixed,
    numberstyle = \tiny\color{Gray0},
    numbersep = 5pt,
    captionpos = b,
    extendedchars = true, % Use umlauts
    tabsize = 4,
    breaklines = true,
    breakatwhitespace = true,
    basicstyle = \ttfamily\small,
    keywordstyle = \color{Firebrick3},
    keywordstyle = [2]{\color{SpringGreen4}},
    keywordstyle = [3]{\color{DodgerBlue4}},
    keywordstyle = [4]{\color{DarkOrange3}},
    stringstyle = \color{OliveDrab4},
    showstringspaces = false,
    commentstyle = \itshape\color{Snow4},
    emphstyle = \color{NavyBlue},
}

% Options
\DeclareOption{style=context}{
    \lstset{
        backgroundcolor = \color{gray!10},
        numbers = left,
        numberstyle = \tiny\color{Gray0},
        title = \lstname,
        frame = lines,
    }
}
\DeclareOption{style=nocontext}{
    \lstset{
        backgroundcolor = {},
        numbers = none,
        caption = {},
        frame = none,
    }
}
\DeclareOption*{
    \lstset{\CurrentOption}
}

\ProcessOptions*

% Style with context information
\lstdefinestyle{context}{
    backgroundcolor = \color{gray!10},
    numbers = left,
    numberstyle = \tiny\color{Gray0},
    title = \lstname,
    frame = lines,
}

% Style without context information
\lstdefinestyle{nocontext}{
    backgroundcolor = {},
    numbers = none,
    caption = {},
    frame = none,
}

% Custom language definitions
\RequirePackage{sourcecode.d/mips}
\RequirePackage{sourcecode.d/haskell}
